<project name="slim3" default="create-lib" basedir=".">

	<property file="build.properties" />

    <path id="project.classpath">
        <pathelement path="build/classes" />
	    <fileset dir="lib">
            <include name="**/*.jar" />
        </fileset>
	    <fileset dir="${sdk.dir}/lib">
	      <include name="**/*.jar" />
	    </fileset>
    </path>
	
	<target name="create-lib" depends="clean">
	    <jar jarfile="target/slim3-${ver}.jar" basedir="build/classes"/>
	    <jar jarfile="target/slim3-${ver}-sources.jar" basedir="src/main/java"/>
	</target>
	
    <target name="dist" depends="clean, javadoc, create-lib">
    	<jar jarfile="target/slim3-${ver}-javadoc.jar" basedir="javadoc"/>
    	<zip zipfile="target/slim3-${ver}.zip" basedir="target"/>
    </target>

    <target name="clean">
        <delete dir="target" failonerror="false"/>
        <mkdir dir="target"/>
    </target>
	
    <target name="javadoc">
        <delete dir="javadoc" failonerror="false"/>
        <javadoc access="protected" author="true" classpathref="project.classpath" destdir="javadoc" nodeprecated="false" nodeprecatedlist="false" noindex="false" nonavbar="false" notree="false" source="1.6" sourcepath="src/main/java" splitindex="true" use="true" version="true">
            <link href="http://db.apache.org/jdo/api23/apidocs/"/>
        	<link href="http://code.google.com/appengine/docs/java/javadoc/" />
            <link href="http://java.sun.com/javaee/5/docs/api/"/>
            <link href="http://java.sun.com/javase/6/docs/api/"/>
            <link href="http://www.junit.org/junit/javadoc/3.8.1/"/>
        </javadoc>
    </target>
</project>